<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />

    <link href="style.css" rel="stylesheet" />
    <link
      href="https://fonts.googleapis.com/css?family=Inconsolata"
      rel="stylesheet"
    />
    <script src="jquery-3.3.1.min.js"></script>

    <style>
      .row {
        display: flex;
        align-items: start;
      }

      .container {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        grid-template-rows: repeat(3, 1fr);
        grid-row-gap: -11px;
        width: 99vw;
        height: 70vh;
        margin-left: 20px;
      }

      .wrapper {
        display: flex;
        justify-content: center;
        /* align-items: center; */
        width: 100%;
        height: 100%;
        margin-bottom: 10px;
      }

      .hover-animation {
        position: relative;
        width: 100%;
        height: 100%;
      }

      .wrapper img {
        display: block;
        min-width: 98%;
        height: 98% !important;
        /* object-fit: contain; */
      }
      .button {
        /* max-width: 100px; */
        width: 80%;
        /* height: 50%; */
        margin: 1px;
      }
    </style>
  </head>
  <body>
    <div class="row" class="wrapper">
      <div class="input">
        <textarea
          class="search"
          autocomplete="on"
          id="input"
          type="text"
          style="
            width: 80vw;
            font-size: 35px;
            height: 8vh;
            height: auto;
            rows: 4;
            margin-left: 20px;
            margin-bottom: 0.2em;
            background-color: rgb(255, 255, 255);
            border-width: 1px;
          "
        ></textarea>
        <div
          class="search-results"
          id="input"
          style="
            width: 80vw;
            font-size: 3em;
            height: 70px;
            margin-left: 20px;
            background-color: #eeee;
            border-width: 1px;
          "
        ></div>
      </div>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <button onclick="speak()" style="height: 8vh">
        <img src="images/speak.png" style="height: 7vh" />
      </button>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <button onclick="clearInput()" style="height: 8vh">
        <img src="images/clear.png" style="height: 7vh" />
      </button>
    </div>

    <br />

    <div class="container">
      <!--row 1-->
      <div class="wrapper">
        <div class="hover-animation">
        <a href="vowels.html">
          <img
            class="button"
            class="normal-image"
            src="hirigana/vowels.png"
            alt="Image Button 1"
            onclick="location.href='vowels.html';"
            id=" た"
         </a>
          </a>
          <img
            class="hover-image"
            class="button"
            src="hirigana/vowelsa.png"
            alt="Image Button 1"
            onclick="location.href='vowels.html';"
            id="た"
          />
        </div>
      </div>
      
       <div class="wrapper">
        <div class="hover-animation">
          <img
            class="button"
            class="normal-image"
            src="hirigana/special.png"
            alt="Image Button 1"
            onclick="location.href='special.html';"
            id="て"
          />
          <img
            class="hover-image"
            class="button"
            src="hirigana/speciala.png"
            alt="Image Button 1"
            onclick="location.href='special.html';"
            id="て"
          />
        </div>
      </div>

      <div class="wrapper">
        <div class="hover-animation">
          <img
            class="button"
            class="normal-image"
            src="hirigana/K.png"
            alt="Image Button 1"
            onclick="location.href='K.html';"
            id="ち"
          />
          <img
            class="hover-image"
            class="button"
            src="hirigana/Ka.png"
            alt="Image Button 1"
            onclick="location.href='K.html';"
            id="ち"
          />
        </div>
      </div>
      <div class="wrapper">
        <div class="hover-animation">
          <img
            class="button"
            class="normal-image"
            src="hirigana/S.png"
            alt="Image Button 1"
            onclick="location.href='S.html';"
            id="つ"
          />
          <img
            class="hover-image"
            class="button"
            src="hirigana/Sa.png"
            alt="hirigana Button 1"
            onclick="location.href='S.html';"
            id="つ"
          />
        </div>
      </div>
     
      <div class="wrapper">
        <div class="hover-animation">
          <img
            class="button"
            class="normal-image"
            src="hirigana/T.png"
            alt="Image Button 1"
           onclick="location.href='T.html';"
            id="と"
          />
          <img
            class="hover-image"
            class="button"
            src="hirigana/Ta.png"
            alt="Image Button 1"
            onclick="location.href='T.html';"
            id="と"
          />
        </div>
      </div>
      <!-- 2nd row -->

      <div class="wrapper">
        <div class="hover-animation">
          <img
            class="button"
            class="normal-image"
            src="hirigana/N.png"
            alt="Image Button 1"
            onclick="location.href='N.html';"
            id="だ"
          />
          <img
            class="hover-image"
            class="button"
            src="hirigana/Na.png"
            alt="Image Button 1"
            onclick="location.href='N.html';"
            id="だ"
          />
        </div>
      </div>
      <div class="wrapper">
        <div class="hover-animation">
          <img
            class="button"
            class="normal-image"
            src="hirigana/H.png"
            alt="Image Button 1"
            onclick="location.href='H.html';"
            id="じ"
          />
          <img
            class="hover-image"
            class="button"
            src="hirigana/Ha.png"
            alt="Image Button 1"
            onclick="location.href='H.html';"
            id="じ"
          />
        </div>
      </div>
      <div class="wrapper">
        <div class="hover-animation">
          <img
            class="button"
            class="normal-image"
            src="hirigana/M.png"
            alt="Image Button 1"
            onclick="location.href='M.html';"
            id="ず"
          />
          <img
            class="hover-image"
            class="button"
            src="hirigana/Ma.png"
            alt="Image Button 1"
            onclick="location.href='M.html';"
            id="ず"
          />
        </div>
      </div>
      <div class="wrapper">
        <div class="hover-animation">
          <img
            class="button"
            class="normal-image"
            src="hirigana/Y.png"
            alt="Image Button 1"
            onclick="location.href='Y.html';"
            id="で"
          />
          <img
            class="hover-image"
            class="button"
            src="hirigana/Ya.png"
            alt="Image Button 1"
            onclick="location.href='Y.html';"
            id="で"
          />
        </div>
      </div>
      <div class="wrapper">
        <div class="hover-animation">
          <img
            class="button"
            class="normal-image"
            src="hirigana/R.png"
            alt="Image Button 1"
            onclick="location.href='R.html';"
            id="ど"
          />
          <img
            class="hover-image"
            class="button"
            src="hirigana/Ra.png"
            alt="Image Button 1"
            onclick="location.href='R.html';"
            id="ぞ"
          />
        </div>
      </div>
      <!-- 3rd row -->
      <!-- <div class="wrapper"></div>
      <div class="wrapper"></div>
      <div class="wrapper"></div>
      <div class="wrapper"></div>
      <div class="wrapper"></div> -->

       <!--4th row-->
   <div class="wrapper">
<div class="hover-animation">
<a href="keyboard.html">
<img
class="normal-image"
class="button"
src="hirigana/keyboard.png"
alt="Image Button 3"
/>
</a>
<a href="keyboard.html">
<img
class="hover-image"
class="button"
src="hirigana/keyboarda.png"
alt="Image Button 3"
/>
</a>
</div>
</div>
      <div class="wrapper">
        <div class="hover-animation">
          <img
            class="button"
            class="normal-image"
           src="hirigana/space.png"
            alt="Image Button 1"
            onclick="updateResult(this.id)"
            id=" "
          />
          <img
            class="hover-image"
            class="button"
           src="hirigana/spacea.png"
            alt="Image Button 1"
            onclick="updateResult(this.id)"
            id=" "
          />
        </div>
      </div>
	  	  
      <div class="wrapper">
        <div class="hover-animation">
          <img
            class="button"
            class="normal-image"
           src="hirigana/comma.png"
            alt="Image Button 1"
            onclick="updateResult(this.id)"
            id=","
          />
          <img
            class="hover-image"
            class="button"
           src="hirigana/commaa.png"
            alt="Image Button 1"
            onclick="updateResult(this.id)"
            id=","
          />
        </div>
      </div>
	  

      <div class="wrapper">
        <div class="hover-animation">
          <img
            class="button"
            class="normal-image"
           src="hirigana/period.png"
            alt="Image Button 1"
            onclick="updateResult(this.id)"
            id="."
          />
          <img
            class="hover-image"
            class="button"
           src="hirigana/perioda.png"
            alt="Image Button 1"
            onclick="updateResult(this.id)"
            id="."
          />
        </div>
      </div>

      <div class="wrapper">
        <div class="hover-animation">
          <img
            class="button"
            class="normal-image"
           src="hirigana/questionmark.png"
            alt="Image Button 1"
            onclick="updateResult(this.id)"
            id="?"
          />
          <img
            class="hover-image"
            class="button"
           src="hirigana/questionmarka.png"
            alt="Image Button 1"
            onclick="updateResult(this.id)"
            id="?"
          />
        </div>
      </div>

      <!--4th row-->
      <!--7th row-->
    </div>

    <script>
      function updateResult(id) {
        // Get the form field
        var resultField = document.getElementById("input");

        // Set the value of the form field to the id of the clicked button
        const fieldValue = resultField.value + id;
        resultField.value = fieldValue;
        localStorage.setItem("inputValue", fieldValue);
        var msg = new SpeechSynthesisUtterance();
        msg.text = id;
        msg.lang = "ja";
        window.location.href = "keyboard.html";
      }

      function speak() {
        var utterance = document.getElementById("input").value;
        var voice_id = "iaoEPcyNDQeQ4BLL8bKC";

        var url = `https://api.elevenlabs.io/v1/text-to-speech/${voice_id}?optimize_streaming_latency=0&output_format=mp3_44100_128`;

        var requestData = {
          text: utterance,
          model_id: "eleven_monolingual_v1",
          voice_settings: {
            stability: 0,
            similarity_boost: 0,
            style: 0,
            use_speaker_boost: true,
          },
        };

        fetch(url, {
          method: "POST",
          headers: {
            Accept: "audio/mpeg",
            "xi-api-key": "713bc7c2cd2c549aeb9032623848ec31",
            "Content-Type": "application/json",
          },
          body: JSON.stringify(requestData),
        })
          .then((response) => response.blob())
          .then((blob) => {
            var url = URL.createObjectURL(blob);
            var audio = new Audio(url);
            audio.play();
          })
          .catch((error) => console.error("Error:", error));
        // Get the form field
        // var utterance = document.getElementById("input");

        // // Set the value of the form field to the id of the clicked button
        // // resultField.value = id;

        // var msg = new SpeechSynthesisUtterance();
        // msg.text = utterance.value;
        // msg.lang = "ja";
        // msg.rate = 0.9;

        // window.speechSynthesis.speak(msg);
        // clearSuggestion();
      }

      function clearSuggestion() {
        const resultsWrapper = document.querySelector(".search-results");
        resultsWrapper.classList.remove("show");
        resultsWrapper.innerHTML = null;
      }

      function clearInput() {
        const inputBox = document.getElementById("input");
        let inputValue = inputBox.value;
        let substr = inputValue.slice(0, inputValue.length - 1);
        localStorage.setItem("inputValue", substr);
        inputBox.value = substr;
        inputBox.focus();
      }

      function goBack() {
        window.history.back();
      }
    </script>

    <script src="script.js"></script>
    <script src="keyboardscript.js"></script>
  </body>
</html>
